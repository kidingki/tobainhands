{
  "_args": [
    [
      {
        "raw": "websql@github:expo/node-websql#18.0.0",
        "scope": null,
        "escapedName": "websql",
        "name": "websql",
        "rawSpec": "github:expo/node-websql#18.0.0",
        "spec": "github:expo/node-websql#18.0.0",
        "type": "hosted",
        "hosted": {
          "type": "github",
          "ssh": "git@github.com:expo/node-websql.git#18.0.0",
          "sshUrl": "git+ssh://git@github.com/expo/node-websql.git#18.0.0",
          "httpsUrl": "git+https://github.com/expo/node-websql.git#18.0.0",
          "gitUrl": "git://github.com/expo/node-websql.git#18.0.0",
          "shortcut": "github:expo/node-websql#18.0.0",
          "directUrl": "https://raw.githubusercontent.com/expo/node-websql/18.0.0/package.json"
        }
      },
      "D:\\reactnative\\toba\\node_modules\\expo"
    ]
  ],
  "_from": "expo/node-websql#18.0.0",
  "_id": "websql@0.4.4",
  "_inCache": true,
  "_location": "/expo/websql",
  "_phantomChildren": {},
  "_requested": {
    "raw": "websql@github:expo/node-websql#18.0.0",
    "scope": null,
    "escapedName": "websql",
    "name": "websql",
    "rawSpec": "github:expo/node-websql#18.0.0",
    "spec": "github:expo/node-websql#18.0.0",
    "type": "hosted",
    "hosted": {
      "type": "github",
      "ssh": "git@github.com:expo/node-websql.git#18.0.0",
      "sshUrl": "git+ssh://git@github.com/expo/node-websql.git#18.0.0",
      "httpsUrl": "git+https://github.com/expo/node-websql.git#18.0.0",
      "gitUrl": "git://github.com/expo/node-websql.git#18.0.0",
      "shortcut": "github:expo/node-websql#18.0.0",
      "directUrl": "https://raw.githubusercontent.com/expo/node-websql/18.0.0/package.json"
    }
  },
  "_requiredBy": [
    "/expo"
  ],
  "_resolved": "git://github.com/expo/node-websql.git#e364fa65146a9e2157a19e5c719e7702c2b6b87a",
  "_shasum": "b1521c253b784fe91989b0115cb0783cdc971e65",
  "_shrinkwrap": null,
  "_spec": "websql@github:expo/node-websql#18.0.0",
  "_where": "D:\\reactnative\\toba\\node_modules\\expo",
  "author": {
    "name": "Nolan Lawson",
    "email": "nolan@nolanlawson.com"
  },
  "browser": {
    "lib/index.js": "lib/browser.js",
    "crypto": false,
    "fs": false,
    "levelup": false,
    "leveldown": false,
    "level": false,
    "rimraf": false,
    "mkdirp": false
  },
  "bugs": {
    "url": "https://github.com/nolanlawson/node-websql/issues"
  },
  "dependencies": {
    "argsarray": "^0.0.1",
    "immediate": "^3.2.2",
    "noop-fn": "^1.0.0",
    "pouchdb-collections": "^1.0.1",
    "tiny-queue": "^0.2.1"
  },
  "description": "WebSQL Database API, implemented for Node using sqlite3",
  "devDependencies": {
    "assert": "1.3.0",
    "bluebird": "3.3.5",
    "chai": "3.5.0",
    "chai-as-promised": "5.3.0",
    "denodeify": "1.2.1",
    "double-ended-queue": "2.1.0-0",
    "istanbul": "0.4.3",
    "istanbul-coveralls": "1.0.3",
    "js-extend": "1.0.1",
    "jshint": "2.8.0",
    "level-write-stream": "1.0.0",
    "levelup": "1.3.1",
    "lie": "3.0.2",
    "mkdirp": "0.5.1",
    "mocha": "2.4.5",
    "phantomjs-prebuilt": "2.1.7",
    "pouchdb-collate": "1.2.0",
    "rimraf": "2.5.2",
    "scope-eval": "0.0.3",
    "spark-md5": "2.0.2",
    "sublevel-pouchdb": "1.0.0",
    "vuvuzela": "1.0.3",
    "zuul": "3.10.1"
  },
  "files": [
    "lib",
    "custom"
  ],
  "gitHead": "e364fa65146a9e2157a19e5c719e7702c2b6b87a",
  "homepage": "https://github.com/nolanlawson/node-websql#readme",
  "keywords": [
    "websql",
    "sql",
    "opendatabase",
    "sqlite",
    "storage",
    "sqlite3",
    "database"
  ],
  "license": "Apache-2.0",
  "main": "lib/index.js",
  "name": "websql",
  "optionalDependencies": {},
  "readme": "NOTE: This is [Expo](http://expo.io)'s fork without the `'sqlite3'` dependency which is unused in React Native.\r\n\r\nnode-websql [![Build Status](https://travis-ci.org/nolanlawson/node-websql.svg?branch=master)](https://travis-ci.org/nolanlawson/node-websql) [![Coverage Status](https://coveralls.io/repos/github/nolanlawson/node-websql/badge.svg?branch=master&nonce=foo)](https://coveralls.io/github/nolanlawson/node-websql?branch=master)\r\n====\r\n\r\nThe [WebSQL Database API][websql], implemented for Node\r\nusing [sqlite3](https://github.com/mapbox/node-sqlite3). In the browser, it falls back to `window.openDatabase`.\r\n\r\nInstall\r\n----\r\n\r\n    npm install websql\r\n\r\nUsage\r\n----\r\n\r\n```js\r\nvar openDatabase = require('websql');\r\n```\r\n\r\nCreate a SQLite3 database called `mydb.db`:\r\n\r\n```js\r\nvar db = openDatabase('mydb.db', '1.0', 'description', 1);\r\n```\r\n\r\nCreate an in-memory database:\r\n\r\n```js\r\nvar db = openDatabase(':memory:', '1.0', 'description', 1);\r\n```\r\n\r\nAPI\r\n---\r\n\r\n### openDatabase(name, version, description, size [, callback])\r\n\r\nThe `name` is the name of the database. It's passed verbatim to [sqlite3][].\r\n\r\nThe `version` is the database version (_currently ignored - see below_).\r\n\r\nThe `description` and `size` attributes are ignored, but they are required for\r\ncompatibility with the WebSQL API.\r\n\r\nThe `callback` just returns the same database object returned\r\nsynchronously (_migrations currently aren't supported - see below_).\r\n\r\nFor more information how to use the WebSQL API, see [the spec][websql] or\r\n[various](http://www.html5rocks.com/en/tutorials/webdatabase/todo/) [tutorials](html5doctor.com/introducing-web-sql-databases/).\r\n\r\nFor more information on `sqlite3`, see [the SQLite3 readme](sqlite3).\r\n\r\n### In the browser\r\n\r\nYou can also use this module in the browser (via Browserify/Webpack/etc.),\r\nin which case it will just use\r\n`window.openDatabase`, meaning you are subject to [browser WebSQL support](http://caniuse.com/#feat=sql-storage).\r\n\r\n### readTransaction() vs transaction()\r\n\r\nBoth `readTransaction()` (read-only) and `transaction()` (read-write) are supported.\r\n`readTransaction()` has some small performance optimizations, so it's worthwhile to\r\nuse if you're not writing any data in a transaction.\r\n\r\nGoals\r\n----\r\n\r\nThe [WebSQL Database API][websql] is a deprecated\r\nstandard, but in many cases it's useful to reuse legacy code\r\ndesigned for browsers that support WebSQL. Also, it allows you to quickly\r\ntest WebSQL-based code in Node, which can be convenient.\r\n\r\nThe goal of this API is to exactly match the existing WebSQL API, as implemented\r\nin browsers. If there's any difference between browsers (e.g. `rows[0]` is supported\r\nin Chrome, whereas only `rows.item(0)` is supported in Safari), then the lowest-common\r\ndenominator version is exported by this library.\r\n\r\nThis library has a robust test suite, and has been known to pass the PouchDB\r\ntest suite as well.\r\n\r\nNon-Goals\r\n---\r\n\r\nThis library is _not_ designed to:\r\n\r\n- Invent new APIs, e.g. deleting databases, supporting `BLOB`s, encryption, etc.\r\n- Support WebSQL in Firefox, IE, or other non-WebSQL browsers\r\n\r\nIn other words, the goal is not to carry the torch of WebSQL,\r\nbut rather to bridge the gap from existing WebSQL-based code to Node.js.\r\n\r\nCustom SQLite3 bindings\r\n----\r\n\r\nThis library is designed to allow swappable SQLite3 implementations, beyond\r\njust [node-sqlite3](https://github.com/mapbox/node-sqlite3). Examples:\r\n\r\n* [node-websql itself](https://github.com/nolanlawson/node-websql/blob/7c6327c2bbcf48bb0ac26f8f689206b7227baf81/lib/sqlite/SQLiteDatabase.js)\r\n* [Cordova SQLite Plugin 2](https://github.com/nolanlawson/cordova-plugin-sqlite-2/blob/6bc32a4e71a3eea28fbc98c4da7e87c56156d094/src/javascript/SQLiteDatabase.js)\r\n* [React Native SQLite 2](https://github.com/noradaiko/react-native-sqlite-2)\r\n\r\nTo create your own custom implementation, use this API:\r\n\r\n```js\r\nvar customOpenDatabase = require('websql/custom');\r\nvar openDatabase = customOpenDatabase(SQLiteDatabase);\r\n```\r\n\r\nThis `SQLiteDatabase` implementation needs to be a constructor-style function\r\nwith a constructor signature like so:\r\n\r\n```js\r\n// takes a single argument: the database name\r\nvar db = new SQLiteDatabase('dbname');\r\n```\r\n\r\nThen it implements a single function, `exec()`, like so:\r\n\r\n```js\r\nfunction exec(queries, readOnly, callback) {\r\n  // queries: an array of SQL statements and queries, with a key \"sql\" and \"args\"\r\n  // readOnly: whether or not these queries are in \"read only\" mode\r\n  // callback: callback to be called with results (first arg is error, second arg is results)\r\n}\r\n```\r\n\r\nHere is the full specification:\r\n\r\n### SQLiteDatabase(name (String))\r\n\r\nConstruct a new `SQLiteDatbase` object, with the given string name.\r\n\r\n### exec(queries (Array<SQLQuery>), readOnly (boolean), callback (function))\r\n\r\nExecute the list of `SQLQuery`s. If we are in `readOnly` mode, then any\r\nnon-`SELECT` queries need to throw an error without executing. This function calls the Node-style\r\ncallback with an error as the first argument or the `Array<SQLResult>` as\r\nthe second argument.\r\n\r\n### SQLQuery\r\n\r\nA SQL query and bindings to execute. This can be a plain JavaScript object or a custom class,\r\nas long as it has the following members:\r\n\r\n#### sql (String)\r\n\r\nThe SQL query to execute.\r\n\r\n#### args (Array<String>)\r\n\r\nThe arguments to bind the query.\r\n\r\nE.g.:\r\n\r\n```js\r\n{\r\n  sql: 'INSERT INTO foo values (?, ?)',\r\n  args: ['bar', 'baz']\r\n}\r\n```\r\n\r\n### SQLResult\r\n\r\nA result returned by a SQL query. This can be a plain JavaScript object or a custom class,\r\nas long as it has the following members:\r\n\r\n#### error\r\n\r\nA JavaScript `Error` object, or `undefined` if the `SQLQuery` did not throw an error. If `error` is truthy, then it's assumed `insertId`, `rowsAffected`, and `rows` are falsy (they will be ignored anyway).\r\n\r\n#### insertId (number)\r\n\r\nAn insertion ID representing the new row number, or `undefined` if nothing was inserted.\r\n\r\n#### rowsAffected (number)\r\n\r\nThe number of rows affected by the query, or 0 if none.\r\n\r\n#### rows (Array&lt;object&gt;)\r\n\r\nThe rows returned by a `SELECT` query, or empty if none.\r\n\r\nEach object is a mapping of keys (columns) to values (value fetched).\r\n\r\nE.g.:\r\n\r\n```js\r\n{\r\n  insertId: undefined,\r\n  rowsAffected: 0,\r\n  rows: [\r\n    {'foo': 'bar'},\r\n    {'foo': 'baz'},\r\n  ]\r\n}\r\n```\r\n\r\nOr:\r\n\r\n```js\r\n{\r\n  error: new Error('whoopsie')\r\n}\r\n```\r\n\r\nFor an example implementation (and the one used by this module)\r\nsee `lib/sqlite/SQLiteDatabase.js`.\r\n\r\nTODOs\r\n---\r\n\r\nThe versioning and migration APIs\r\n(i.e. [`changeVersion()`](https://www.w3.org/TR/webdatabase/#dom-database-changeversion))\r\nare not supported. Pull requests welcome!\r\n\r\nLimitations\r\n----\r\n\r\n1. With the restrictions of the [node-sqlite3 API](https://github.com/mapbox/node-sqlite3/wiki/API)\r\non database names (\"Valid values are filenames, \":memory:\" for an anonymous\r\nin-memory database and an empty string for an anonymous disk-based\r\ndatabase\") and our lack of interest to enforce a particular mapping that\r\nhonors the [WebSQL spec](https://www.w3.org/TR/webdatabase/#dom-opendatabase)\r\nin its indicating that \"All strings including the empty string are valid database\r\nnames\" (and that they are case-sensitive), consumers will need to do their\r\nown mapping for strings in order to 1) avoid problems with invalid filenames or\r\nfilenames on case insensitive file systems, and to 2) avoid user databases being\r\ngiven special treatment if the empty string or the string \":memory:\" is used;\r\nanother special purpose form of string supported by SQLite that may call for\r\nescaping are [`file::memory:...`](https://sqlite.org/inmemorydb.html)\r\n[URLs](https://sqlite.org/uri.html#uri_format).\r\n\r\n2. Although neither the WebSQL spec nor SQLite speaks to this matter,\r\n`node-sqlite3` has the following additional\r\n[limitations](https://github.com/mapbox/node-sqlite3/wiki/API#databaseexecsql-callback)\r\nwhich are surfaced for our users: namely, that statements will only be\r\nexecuted up to the first NULL byte and [SQL comments](https://sqlite.org/lang_comment.html)\r\nwill lead to runtime errors.\r\n\r\nTesting\r\n----\r\n\r\nFirst:\r\n\r\n    npm install\r\n\r\nMain test suite:\r\n\r\n    npm test\r\n\r\nLinter:\r\n\r\n    npm run lint\r\n\r\nTest in debug mode (e.g. with the `node-inspector`):\r\n\r\n    npm run test-debug\r\n\r\nRun the test suite against actual WebSQL in a browser:\r\n\r\n    npm run test-local\r\n\r\nRun the actual-WebSQL test against PhantomJS:\r\n\r\n    npm run test-phantom\r\n\r\n[websql]: https://www.w3.org/TR/webdatabase/\r\n[sqlite3]: https://github.com/mapbox/node-sqlite3\r\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git://github.com/nolanlawson/node-websql.git"
  },
  "scripts": {
    "coverage": "npm run test-coverage && npm run ensure-coverage",
    "ensure-coverage": "istanbul check-coverage --lines 100 --function 100 --statements 100 --branches 100",
    "lint": "jshint -c .jshintrc lib test",
    "report-coverage": "npm run test-coverage && istanbul-coveralls --no-rm",
    "test": "mocha test/test.js",
    "test-coverage": "istanbul cover ./node_modules/mocha/bin/_mocha -- test/test.js",
    "test-debug": "mocha --debug-brk test/test.js",
    "test-local": "zuul --no-coverage --local 9000 --ui mocha-bdd test/test.js",
    "test-phantom": "zuul --no-coverage --phantom --ui mocha-bdd test/test.js"
  },
  "version": "0.4.4"
}
